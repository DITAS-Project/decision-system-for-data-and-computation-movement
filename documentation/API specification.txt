openapi: "3.0.0"
info:
  version: "0.1"
  title: Decision System for Data and Computation Movement
  description: The goal of the component consists in selecting the best data and computation movement actions to be adopted in order to restore the level of data quality, quality of service and security defined by the application developer.
  license:
    name: License TBD
    url: https://www.apache.org/licenses/LICENSE-2.0.html
servers:
  - url: http://petstore.swagger.io/api
paths:
  /notifyViolation:
    post:
      summary: "notifyViolation"
      description: "The method receives in input the appllication developer's requirements and the list of violated requirements."
      
      requestBody:
        description: "Application requirements and list of violated requirements. Both input merged in the same body because at most 1 body parameter can be defined. [Click here for more info](https://github.com/swagger-api/swagger-editor/issues/889)"
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/input"
              
      responses:
        405:
          description: "Invalid input"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        200:
          description: "Valid input"
  /setUp:
    post:
      summary: "set Up"
      description: "The API is called when the service is deployed, it receives in input the abstract blueprint."
      
      requestBody:
        description: "Concrete blueprint."
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/concreteBlueprint"
              
      responses:
        405:
          description: "Invalid input"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        200:
          description: "Valid input"
          
          
  /addVDC:
    post:
      summary: "add VDC"
      description: "The API is called when a new VDC is deployed, it receives in input the abstract blueprint."
      
      requestBody:
        description: "Concrete blueprint."
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/concreteBlueprint"
              
      responses:
        405:
          description: "Invalid input"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        200:
          description: "Valid input"
          
components:
  schemas:
    concreteBlueprint:
      properties:
        name:
          type: string
        tag:
          type: string   
    
    applicationRequirements:
      properties:
        name:
          type: string
        tag:
          type: string   


    violation:
      properties:
        type:
          type: "string"
          description: "the agreement id"
        agreementid: 
          type: "integer"
        guaranteename: 
          type: "string"
          description: "the sla name"
        date: 
          type: "string"
          description: "date when the violation was detected"
        metric:        
          type: "string"
          description: "the metric name"
        value:  
          type: "number"
          description: "violation value"
          
    input:
      properties:
        violations:
          type: "array"
          items: 
            $ref: "#/components/schemas/violation"
        applicationRequirements:
          $ref: "#/components/schemas/applicationRequirements"
          
    Error:
      required:
        - code
        - message
      properties:
        code:
          type: integer
          format: int32
        message:
          type: string
